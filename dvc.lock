schema: '2.0'
stages:
  train:
    cmd: bash -c "source scripts/mlflow_env.local.sh && 
      scripts/ensure_mlflow_env.sh && python -m src.training"
    deps:
    - path: data/processed/weatherAUS_processed.csv
      hash: md5
      md5: 672f3b34074b1bf5bb1b2a0323cf0d50
      size: 14591253
      isexec: true
    - path: src/data_preparation.py
      hash: md5
      md5: 5490a2db10b817a72c477e455f719c38
      size: 3497
      isexec: true
    - path: src/training.py
      hash: md5
      md5: 6f3985cba5d63fcc5bcc384d13d3b055
      size: 2426
      isexec: true
    outs:
    - path: models/pipeline.joblib
      hash: md5
      md5: 4fa29568bed94e7256c2a29e04d4cdd2
      size: 14833732
      isexec: true
  evaluate:
    cmd: bash -c "source scripts/mlflow_env.local.sh && 
      scripts/ensure_mlflow_env.sh && python -m src.evaluation"
    deps:
    - path: data/processed/weatherAUS_processed.csv
      hash: md5
      md5: 672f3b34074b1bf5bb1b2a0323cf0d50
      size: 14591253
      isexec: true
    - path: models/pipeline.joblib
      hash: md5
      md5: 4fa29568bed94e7256c2a29e04d4cdd2
      size: 14833732
      isexec: true
    - path: src/data_preparation.py
      hash: md5
      md5: 5490a2db10b817a72c477e455f719c38
      size: 3497
      isexec: true
    - path: src/evaluation.py
      hash: md5
      md5: c4c8ac40722ec1cad3e456b20e0fe24f
      size: 1594
      isexec: true
    outs:
    - path: metrics/eval.json
      hash: md5
      md5: a8dbcb3f281195d4709d6e9f7b84d462
      size: 163
      isexec: true
  predict:
    cmd: bash -c "source scripts/mlflow_env.local.sh && 
      scripts/ensure_mlflow_env.sh && python -m src.predict_batch"
    deps:
    - path: data/raw/weatherAUS.csv
      hash: md5
      md5: a65cf8b8719b1a65db4f361eeec18457
      size: 14094055
      isexec: true
    - path: models/pipeline.joblib
      hash: md5
      md5: 4fa29568bed94e7256c2a29e04d4cdd2
      size: 14833732
      isexec: true
    - path: src/predict_batch.py
      hash: md5
      md5: ac849bedef860776c2156bb362c7ac43
      size: 1378
      isexec: true
    outs:
    - path: outputs/predictions_daily.csv
      hash: md5
      md5: b156e01f762ce5a7c27e91f6cacf488a
      size: 124
      isexec: true
  preprocess:
    cmd: python -m src.data_preparation
    deps:
    - path: data/raw/weatherAUS.csv
      hash: md5
      md5: a65cf8b8719b1a65db4f361eeec18457
      size: 14094055
      isexec: true
    - path: src/data_preparation.py
      hash: md5
      md5: 5490a2db10b817a72c477e455f719c38
      size: 3497
      isexec: true
    outs:
    - path: data/processed/weatherAUS_processed.csv
      hash: md5
      md5: 672f3b34074b1bf5bb1b2a0323cf0d50
      size: 14591253
      isexec: true
